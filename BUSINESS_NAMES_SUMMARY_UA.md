# –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–∑–≤ –±—ñ–∑–Ω–µ—Å—ñ–≤

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–∑–≤ –±—ñ–∑–Ω–µ—Å—ñ–≤ –∑ Yelp Fusion API –ø—ñ–¥ —á–∞—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–≥—Ä–∞–º.

### üéØ –ì–æ–ª–æ–≤–Ω—ñ –∑–º—ñ–Ω–∏:

1. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** (`backend/ads/sync_service.py`):
   - –ó–±—ñ–ª—å—à–µ–Ω–æ –ª—ñ–º—ñ—Ç –∑ 10 –¥–æ 50 business names –∑–∞ –æ–¥–∏–Ω batch
   - –î–æ–¥–∞–Ω–æ –∑–∞—Ç—Ä–∏–º–∫—É 0.2 —Å–µ–∫—É–Ω–¥–∏ –º—ñ–∂ API –∑–∞–ø–∏—Ç–∞–º–∏ (–∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è rate limit)
   - –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –º–µ—Ç–æ–¥ `backfill_missing_business_names()` –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –Ω–∞–∑–≤
   - –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ backfill –≤ –ø—Ä–æ—Ü–µ—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ—Å–ª—è –æ—Å–Ω–æ–≤–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó)

2. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º** (`backend/ads/views.py`):
   - –ú–µ—Ç–æ–¥ `enrich_programs_with_custom_names()` —Ç–µ–ø–µ—Ä —Å–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ë–î
   - –¢—ñ–ª—å–∫–∏ –¥–ª—è –Ω–æ–≤–∏—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤ —Ä–æ–±–ª—è—Ç—å—Å—è API –∑–∞–ø–∏—Ç–∏ (–º–∞–∫—Å–∏–º—É–º 10)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö business names –≤ –ë–î

3. **–ö–µ—à—É–≤–∞–Ω–Ω—è**:
   - Redis –∫–µ—à –¥–ª—è business names (TTL: 30 —Ö–≤–∏–ª–∏–Ω)
   - Batch –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ –∫–µ—à—É

### üìä –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:

#### –ü—Ä–∏ –ø–µ—Ä—à—ñ–π —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:
```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "Sync Programs"
2. Backend –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø—Ä–æ–≥—Ä–∞–º–∏ –∑ Yelp Partner API
3. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ business_id:
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î Redis –∫–µ—à
   - –Ø–∫—â–æ –Ω–µ–º–∞—î - –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ë–î
   - –Ø–∫—â–æ –Ω–µ–º–∞—î - —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç –¥–æ Yelp Fusion API
   - –ó–±–µ—Ä—ñ–≥–∞—î –Ω–∞–∑–≤—É –≤ –ë–î —ñ Redis
4. –ü—ñ—Å–ª—è –æ—Å–Ω–æ–≤–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:
   - –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è backfill –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –Ω–∞–∑–≤ (–¥–æ 50)
5. Frontend –æ—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –∑ –Ω–∞–∑–≤–∞–º–∏ –±—ñ–∑–Ω–µ—Å—ñ–≤
6. –í dropdown –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è –Ω–∞–∑–≤–∏ –∑–∞–º—ñ—Å—Ç—å ID
```

#### API –∑–∞–ø–∏—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ –±—ñ–∑–Ω–µ—Å—É:
```http
GET https://api.yelp.com/v3/businesses/Lo6ye25DRwOJZ1QiXBg3Vw

Response:
{
    "id": "Lo6ye25DRwOJZ1QiXBg3Vw",
    "name": "Acme Sushi - TEST LISTING",
    "url": "https://www.yelp.com/biz/...",
    ...
}
```

–ù–∞–∑–≤–∞ `"Acme Sushi - TEST LISTING"` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –ë–î –≤ –ø–æ–ª—ñ `business_name`.

### üé® –©–æ –±–∞—á–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:

#### –†–∞–Ω—ñ—à–µ:
```
üè¢ Business:
[All Businesses (8) ‚ñº]
  kFFwU3RBbwOfaRhkWVgJA ‚Ä¢ 6 programs
  aWhkYzeihrBnTUk_V3MUtg ‚Ä¢ 1 programs
```

#### –¢–µ–ø–µ—Ä:
```
üè¢ Business:
[All Businesses (8) ‚ñº]
  Acme Sushi - TEST LISTING ‚Ä¢ kFFwU3RBbwOfaRhkWVgJA ‚Ä¢ 6 programs
  McDonald's Downtown ‚Ä¢ aWhkYzeihrBnTUk_V3MUtg ‚Ä¢ 1 programs
```

### ‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:

1. **Redis –∫–µ—à**: –ù–∞–∑–≤–∏ –±—ñ–∑–Ω–µ—Å—ñ–≤ –∫–µ—à—É—é—Ç—å—Å—è –Ω–∞ 30 —Ö–≤–∏–ª–∏–Ω
2. **Batch –æ–ø–µ—Ä–∞—Ü—ñ—ó**: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –Ω–∞–∑–≤ –æ–¥–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º –¥–æ –ë–î
3. **Rate limiting**: 0.2 —Å–µ–∫—É–Ω–¥–∏ –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ API –∑–∞–ø–∏—Ç–∞–º–∏
4. **–ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**: 
   - 50 –Ω–∞–∑–≤ –ø—ñ–¥ —á–∞—Å –æ—Å–Ω–æ–≤–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
   - 50 –Ω–∞–∑–≤ –ø—ñ–¥ —á–∞—Å backfill
   - 10 –Ω–∞–∑–≤ –ø—Ä–∏ –ø–µ—Ä–µ–≥–ª—è–¥—ñ —Å–ø–∏—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- **–ü–µ—Ä—à–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**: ~110 business names (50 + 50 + 10)
- **–ü–æ–¥–∞–ª—å—à—ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó**: –¢—ñ–ª—å–∫–∏ –Ω–æ–≤—ñ –±—ñ–∑–Ω–µ—Å–∏
- **–°–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º**: –í—Å–µ –∑ –ë–î (0 API –∑–∞–ø–∏—Ç—ñ–≤!)

### üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
cd /var/www/yelp-ads-dashboard-ui
python backend/test_business_names.py
```

–°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å:
1. ‚úÖ –ß–∏ —î business names –≤ –ë–î
2. üì° –ß–∏ –ø—Ä–∞—Ü—é—î backfill
3. üîç –ß–∏ –ø–æ–≤–µ—Ä—Ç–∞—î BusinessIdsView –Ω–∞–∑–≤–∏
4. üìã –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É

### üöÄ –©–æ –¥–∞–ª—ñ:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é**: –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Sync Programs" –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ dropdown**: –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ—ñ–ª—å—Ç—Ä "Business" - –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –Ω–∞–∑–≤–∏
3. **–Ø–∫—â–æ –Ω–∞–∑–≤ –Ω–µ–º–∞—î**: –ü–æ—á–µ–∫–∞–π—Ç–µ 1-2 —Ö–≤–∏–ª–∏–Ω–∏ (backfill –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ —á–∞—Å)

### üêõ –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–µ—è–∫—ñ business names –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è  
**–†—ñ—à–µ–Ω–Ω—è**: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é –ø–æ–≤—Ç–æ—Ä–Ω–æ - backfill –¥–æ–ø–æ–≤–Ω–∏—Ç—å –≤—ñ–¥—Å—É—Ç–Ω—ñ –Ω–∞–∑–≤–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–º–∏–ª–∫–∞ 429 (Rate Limit)  
**–†—ñ—à–µ–Ω–Ω—è**: –ü–æ—á–µ–∫–∞–π—Ç–µ –≥–æ–¥–∏–Ω—É —ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –∑–Ω–æ–≤—É

### üìù –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:

**–ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:**
- `backend/ads/sync_service.py` - –ª–æ–≥—ñ–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `backend/ads/views.py` - –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º
- `frontend/` - –±–µ–∑ –∑–º—ñ–Ω (–≤–∂–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î business_name)

**–ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
- `ProgramSyncService.backfill_missing_business_names()` - –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –Ω–∞–∑–≤

**–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:**
- –ü–æ–ª–µ `business_name` –≤ –º–æ–¥–µ–ª—ñ `ProgramRegistry` (–≤–∂–µ —ñ—Å–Ω—É—î)
- –Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ `yelp_business_id` —Ç–∞ `business_name`

**API:**
- Yelp Fusion API: `GET /v3/businesses/{business_id}`
- –õ—ñ–º—ñ—Ç: 5000 requests/day

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ**: 17 –∂–æ–≤—Ç–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

