# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º —Ñ—ñ–ª—å—Ç—Ä—ñ–≤

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–º—ñ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∞ (Program Type, Status, Business):
1. –ü–æ–∫–∞–∑—É–≤–∞–≤—Å—è —Å–ø—ñ–Ω–µ—Ä (loader)
2. –ü–æ—Ç—ñ–º –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏—Å—è –Ω–æ–≤—ñ –¥–∞–Ω—ñ
3. **–ê–õ–ï** —Å–ø–æ—á–∞—Ç–∫—É –ø–æ–∫–∞–∑—É–≤–∞–ª–∏—Å—è —Å—Ç–∞—Ä—ñ –∑–∞–∫–µ—à–æ–≤–∞–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏
4. –Ü —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞–∑—É–≤–∞–ª–∏—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### 1. –î–æ–¥–∞–Ω–æ `isFetching` –ø–µ—Ä–µ–≤—ñ—Ä–∫—É

**–§–∞–π–ª:** `frontend/src/components/ProgramsList.tsx`

```typescript
// –î–æ–¥–∞–Ω–æ isFetching –¥–æ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü—ñ—ó
const { data, isLoading, isFetching, error, isError, refetch } = useGetProgramsQuery({
  // ...
});
```

**–©–æ —Ü–µ –¥–∞—î:**
- `isLoading` = true —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- `isFetching` = true –ø—Ä–∏ –±—É–¥—å-—è–∫–æ–º—É –∑–∞–ø–∏—Ç—ñ (–≤–∫–ª—é—á–Ω–æ –∑ refetch)
- –¢–µ–ø–µ—Ä –º–∏ –≤—ñ–¥—Å—Ç–µ–∂—É—î–º–æ –æ–±–∏–¥–≤–∞ —Å—Ç–∞–Ω–∏

### 2. –û–Ω–æ–≤–ª–µ–Ω–æ —É–º–æ–≤—É –ø–æ–∫–∞–∑—É loader'–∞

**–ë—É–ª–æ:**
```typescript
{(isLoading || isChangingPage || isChangingBusiness) ? (
  <Loader2 ... />
) : (
  // –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏
)}
```

**–°—Ç–∞–ª–æ:**
```typescript
{(isLoading || isFetching || isChangingPage || isChangingBusiness) ? (
  <Loader2 ... />
) : (
  // –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏
)}
```

**–©–æ —Ü–µ –¥–∞—î:**
- Loader –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä–∏ –±—É–¥—å-—è–∫–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–∞–Ω–∏—Ö
- –°—Ç–∞—Ä—ñ –¥–∞–Ω—ñ –ù–ï –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏

### 3. –î–æ–¥–∞–Ω–æ `refetchOnMountOrArgChange` –≤ API

**–§–∞–π–ª:** `frontend/src/store/api/yelpApi.ts`

```typescript
getPrograms: builder.query<...>({
  query: ({ ... }) => ({ ... }),
  keepUnusedDataFor: 0,
  refetchOnMountOrArgChange: true, // ‚ú® –î–û–î–ê–ù–û
  providesTags: ['Program'],
  serializeQueryArgs: ({ ... }) => { ... },
})
```

**–©–æ —Ü–µ –¥–∞—î:**
- RTK Query –∑–∞–≤–∂–¥–∏ —Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—Ç–∞—Ä—ñ –∑–∞–∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
- –ì–∞—Ä–∞–Ω—Ç—É—î —Å–≤—ñ–∂—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö

### 4. –û–Ω–æ–≤–ª–µ–Ω–æ useEffect –¥–ª—è reset —Å—Ç–∞–Ω—É

**–ë—É–ª–æ:**
```typescript
useEffect(() => {
  if (!isLoading) {
    setIsChangingPage(false);
    setIsChangingBusiness(false);
  }
}, [isLoading]);
```

**–°—Ç–∞–ª–æ:**
```typescript
useEffect(() => {
  if (!isLoading && !isFetching) {
    setIsChangingPage(false);
    setIsChangingBusiness(false);
  }
}, [isLoading, isFetching]);
```

**–©–æ —Ü–µ –¥–∞—î:**
- –°—Ç–∞–Ω "loading" —Å–∫–∏–¥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –¥–∞–Ω—ñ –ü–û–í–ù–Ü–°–¢–Æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ
- –ù–µ —Å–∫–∏–¥–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–¥—á–∞—Å–Ω–æ

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–±–∏—Ä–∞—î —Ñ—ñ–ª—å—Ç—Ä "CPC"
2. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è loader (1 —Å–µ–∫)
3. –ü–æ–∫–∞–∑—É—é—Ç—å—Å—è —Å—Ç–∞—Ä—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ (BP, EP, CPC) ‚ùå
4. –ß–µ—Ä–µ–∑ 2-3 —Å–µ–∫—É–Ω–¥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ CPC ‚úÖ
```

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–±–∏—Ä–∞—î —Ñ—ñ–ª—å—Ç—Ä "CPC"
2. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è loader (1-2 —Å–µ–∫)
3. –í—ñ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ CPC –ø—Ä–æ–≥—Ä–∞–º–∏ ‚úÖ
```

## üîç –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ß–æ–º—É —Ü–µ –ø—Ä–∞—Ü—é—î?

1. **`isFetching`** - –≤—ñ–¥—Å—Ç–µ–∂—É—î –í–°–Ü –∑–∞–ø–∏—Ç–∏, –Ω–µ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∏–π
2. **`refetchOnMountOrArgChange`** - –∑–º—É—à—É—î RTK Query —Ä–æ–±–∏—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç
3. **`keepUnusedDataFor: 0`** - –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ –≤ –∫–µ—à—ñ
4. **–£–º–æ–≤–∞ `isLoading || isFetching`** - –±–ª–æ–∫—É—î –ø–æ–∫–∞–∑ —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö

### RTK Query Cache Flow:

**–ë–µ–∑ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```
–ó–º—ñ–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞ ‚Üí RTK Query —à—É–∫–∞—î –≤ –∫–µ—à—ñ ‚Üí –ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ ‚Üí 
–ü–æ–∫–∞–∑—É—î —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ ‚Üí –†–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç ‚Üí –ü–æ–∫–∞–∑—É—î –Ω–æ–≤—ñ –¥–∞–Ω—ñ
```

**–ó –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º:**
```
–ó–º—ñ–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞ ‚Üí RTK Query —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç ‚Üí –ü–æ–∫–∞–∑—É—î loader ‚Üí 
–û—Ç—Ä–∏–º—É—î –Ω–æ–≤—ñ –¥–∞–Ω—ñ ‚Üí –ü–æ–∫–∞–∑—É—î –Ω–æ–≤—ñ –¥–∞–Ω—ñ
```

## üìÅ –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

1. **`frontend/src/components/ProgramsList.tsx`**
   - –î–æ–¥–∞–Ω–æ `isFetching` –¥–æ query
   - –û–Ω–æ–≤–ª–µ–Ω–æ —É–º–æ–≤—É –ø–æ–∫–∞–∑—É loader'–∞
   - –û–Ω–æ–≤–ª–µ–Ω–æ useEffect –¥–ª—è reset —Å—Ç–∞–Ω—É

2. **`frontend/src/store/api/yelpApi.ts`**
   - –î–æ–¥–∞–Ω–æ `refetchOnMountOrArgChange: true`

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Advertising Programs page
2. –û–±–µ—Ä—ñ—Ç—å —Ñ—ñ–ª—å—Ç—Ä "Program Type: CPC"
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** –ß–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Å—Ç–∞—Ä—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è? (–ù–Ü ‚úÖ)
4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** –ß–∏ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è loader? (–¢–ê–ö ‚úÖ)
5. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** –ß–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ CPC –ø—Ä–æ–≥—Ä–∞–º–∏ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è? (–¢–ê–ö ‚úÖ)
6. –ó–º—ñ–Ω—ñ—Ç—å –Ω–∞ "Program Type: BP"
7. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** –ß–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ BP –ø—Ä–æ–≥—Ä–∞–º–∏? (–¢–ê–ö ‚úÖ)
8. –ü–æ—î–¥–Ω–∞–π—Ç–µ —Ñ—ñ–ª—å—Ç—Ä–∏: Status: CURRENT + Program Type: CPC
9. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** –ß–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç–æ—á–Ω—ñ CPC –ø—Ä–æ–≥—Ä–∞–º–∏? (–¢–ê–ö ‚úÖ)

## ‚ú® –ü–µ—Ä–µ–≤–∞–≥–∏

‚úÖ –ù–µ–º–∞—î "–º–∏–≥–æ—Ç—ñ–Ω–Ω—è" —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö  
‚úÖ –ß—ñ—Ç–∫–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è  
‚úÖ –ó–∞–≤–∂–¥–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ  
‚úÖ –ö—Ä–∞—â–∞ UX  
‚úÖ –ù–µ–º–∞—î –ø–ª—É—Ç–∞–Ω–∏–Ω–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞  

---

**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 15 –∂–æ–≤—Ç–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —ñ –≥–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

